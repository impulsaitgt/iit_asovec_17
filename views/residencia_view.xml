<?xml version="1.0"?>
<odoo>
    <!--Vista formulario -->
    <record id="residencia_form_view" model="ir.ui.view">
        <field name="name">residencia.form.view</field>
        <field name="model">asovec.residencia</field>
        <field name="arch" type="xml">
            <form string="Residencia">
                <header>
                    <button name="action_nueva_lectura" type="object" string="Nueva Lectura"
                        class="btn-primary" />
                    <button name="action_cargar_servicios_asociacion"
                        type="object"
                        string="Cargar Servicios de Asociación"
                        class="btn-secondary"
                        help="Borra los servicios actuales y carga todos los productos marcados como servicio de asociación." />
                    <button name="action_print_estado_cuenta_lecturas"
                        type="object"
                        string="Estado de Cuenta (Lecturas)"
                        class="btn-primary"
                        icon="fa-file-pdf-o" />
                </header>

                <sheet>
                    <field name="contador_count" invisible="1" />
                    <field name="lectura_count" invisible="1" />

                    <div class="oe_button_box" name="button_box">
                        <button type="object" name="action_ver_contadores" class="oe_stat_button"
                            icon="fa-tachometer">
                            <field name="contador_count" widget="statinfo" string="Contadores" />
                        </button>
                        <button type="object" name="action_ver_lecturas" class="oe_stat_button"
                            icon="fa-list">
                            <field name="lectura_count" widget="statinfo" string="Lecturas" />
                        </button>
                    </div>
                    <group>
                        <field name="name" placeholder="Nombre/Codigo" />
                    </group>
                    <group>
                        <field name="direccion" placeholder="Direccion" />
                        <field name="cliente_id" />
                        <field name="proyecto_aso_id" />
                        <field name="detalle" widget="text" placeholder="Escribe aquí..." />
                        <field name="activo" />
                    </group>
                    <notebook>
                        <page string="Servicios con comportamiento especial para esta Residencia"
                            name="servicios_relacionados">
                            <field name="residencia_lines" mode="tree,kanban">
                                <tree editable="bottom" string="Servicios">
                                    <control>
                                        <create string="Agrega Servicio" />
                                    </control>
                                    <field name="producto_id" />
                                    <field name="currency_id" column_invisible="1" />
                                    <field name="precio"
                                        help="Deja en Cero si quieres excluirlo totalmente" />
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!--Vista
    de arbol-->
    <record id="residencia_tree_view" model="ir.ui.view">
        <field name="name">residencia.tree.view"></field>
        <field name="model">asovec.residencia</field>
        <field name="arch" type="xml">
            <tree string="Residencias">
                <field name="name" />
                <field name="direccion" />
                <field name="detalle" />
                <field name="cliente_id" />
                <field name="proyecto_aso_id" />
                <field name="activo" />
            </tree>
        </field>
    </record>

    <!-- ===================== -->
    <!--  RESIDENCIA - SEARCH  -->
    <!-- ===================== -->
    <record id="asovec_residencia_search_view" model="ir.ui.view">
        <field name="name">asovec.residencia.search</field>
        <field name="model">asovec.residencia</field>
        <field name="arch" type="xml">
            <search string="Buscar Residencias">
                <!-- Quick search -->
                <field name="name" />
                <field name="direccion" />
                <field name="cliente_id" />
                <field name="proyecto_aso_id" />
                <separator />
                <filter string="Activos" name="son_activos"
                    domain="[('activo','!=',False)]" />
                <filter string="Inactivos" name="no_son_activos"
                    domain="[('activo','=',False)]" />


                <separator />

                <!-- Filters -->
                <filter string="Con contadores" name="con_contadores"
                    domain="[('contadores_ids','!=',False)]" />
                <filter string="Sin contadores" name="sin_contadores"
                    domain="[('contadores_ids','=',False)]" />

                <separator />

                <!-- Group By -->
                <group expand="0" string="Agrupar por">
                    <filter string="Proyecto" name="group_proyecto"
                        context="{'group_by':'proyecto_aso_id'}" />
                    <filter string="Contacto" name="group_contacto"
                        context="{'group_by':'cliente_id'}" />
                    <filter string="Activo" name="group_activo"
                        context="{'group_by':'activo'}" />
                </group>
            </search>
        </field>
    </record>
</odoo>